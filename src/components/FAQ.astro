---
const faqs = [
  {
    question: 'What photography services do you offer?',
    answer:
      'I provide three main photography services: Wedding Photography - I capture your special day with a blend of candid moments and posed portraits, documenting everything from getting ready to the first dance. Portrait and Headshot Photography - Professional headshots for business, LinkedIn, or acting portfolios, plus personal portraits for family occasions. Sessions can be in-studio or on location, and I can bring studio equipment to your chosen spot. Product and Promotional Photography - Commercial photography for businesses including product shots, e-commerce imagery, social media content, and promotional campaigns that help your brand stand out.',
  },
  {
    question: 'What is included in your photography services and what are your rates?',
    answer:
      'Every service is tailored to your specific needs and includes professional consultation, the photography session, and expert post-processing with delivery of high-resolution edited images. For detailed package information and current rates, please visit my [rates section] or [contact me here] for a personalized quote based on your requirements.',
  },
  {
    question:
      'How far in advance should I book my photography session and what is your booking process?',
    answer:
      'I recommend booking as soon as possible since dates fill quickly and I keep a limited number of spots to ensure quality service. For details about each service, please visit my [individual services page]. To secure your date, reach out through my [contact form] and we will discuss your needs, check availability, and finalize your booking with a signed contract and retainer.',
  },
  {
    question: 'When should I book and how does your scheduling work?',
    answer:
      'Honestly, the sooner the better. My calendar fills up fast and I only take on a certain number of clients each month so I can give everyone my full attention. You can see what each service involves on my [individual services page], but the booking process is straightforward - just drop me a line, we will chat about what you need, I will check my availability, and then we will get everything locked in with a contract and deposit. Do not wait too long though - the best dates go quickly.',
  },
  {
    question: 'Do you offer complimentary consultations?',
    answer:
      'Yes. I offer free consultations to discuss your vision, answer questions, and make sure we are the perfect fit. [Schedule your consultation here] - spots are limited each week.',
  },
  {
    question: 'What happens if I wait to book?',
    answer:
      'My calendar fills months in advance, especially for popular wedding dates and seasons. The longer you wait, the less likely your preferred date will be available. I recommend reaching out even if you are just considering it - I can hold your date with a small deposit while you finalize details.',
  },
  {
    question: 'Can you show me recent work from sessions like mine?',
    answer:
      'Absolutely. I love sharing recent galleries that match what you are looking for. [Contact me here] with details about your event or session, and I will send you a personalized portfolio of similar work. This also lets us discuss your specific needs and availability.',
  },
  {
    question: 'What makes you different from other photographers?',
    answer:
      'Great question. Rather than list everything here, I would love to chat personally about your vision and show you exactly how I approach each unique situation. [Let us schedule a quick call] - I think you will immediately feel the difference in how I work with my clients.',
  },
];
---

<section class="bg-off-white px-6 py-24 md:px-24">
  <div class="mx-auto max-w-4xl">
    <div class="mb-16 text-center">
      <p class="mb-4 font-sans text-xs uppercase tracking-[0.3em] text-gray-400">
        Questions & Answers
      </p>
      <h2 class="font-display text-4xl text-black md:text-5xl">Frequently Asked Questions</h2>
    </div>

    <div class="border-t border-gray-200" data-faq-accordion>
      {
        faqs.map((faq, index) => (
          <div class={`faq-item${index === 0 ? ' is-open' : ''}`}>
            <button
              type="button"
              class="faq-summary"
              aria-expanded={index === 0 ? 'true' : 'false'}
              aria-controls={`faq-panel-${index}`}
              id={`faq-summary-${index}`}
            >
              <h3 class="flex-1 pr-8 text-left font-sans text-xs uppercase leading-relaxed tracking-widest text-gray-800 md:text-sm">
                {faq.question}
              </h3>
              <span class="faq-icon faq-icon--plus" aria-hidden="true">
                +
              </span>
              <span class="faq-icon faq-icon--minus" aria-hidden="true">
                â€“
              </span>
            </button>

            <div
              class="faq-panel"
              id={`faq-panel-${index}`}
              role="region"
              aria-labelledby={`faq-summary-${index}`}
              hidden={index !== 0}
            >
              <div class="faq-content-inner">
                <p class="font-serif text-lg leading-relaxed text-gray-500">{faq.answer}</p>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  // @ts-nocheck
  (() => {
    const root = document.querySelector('[data-faq-accordion]');
    if (!(root instanceof HTMLElement)) return;
    if (root.dataset.faqInit === 'true') return;
    root.dataset.faqInit = 'true';

    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const DURATION_MS = prefersReducedMotion ? 0 : 360;

    /** @type {HTMLElement[]} */
    const items = Array.from(root.querySelectorAll('.faq-item'));

    /** @type {(item: HTMLElement) => HTMLElement | null} */
    const getPanel = (item) => item.querySelector('.faq-panel');
    /** @type {(item: HTMLElement) => HTMLButtonElement | null} */
    const getButton = (item) => item.querySelector('.faq-summary');

    /** @type {(item: HTMLElement, isOpen: boolean) => void} */
    const setExpanded = (item, isOpen) => {
      const button = getButton(item);
      if (button) button.setAttribute('aria-expanded', String(isOpen));
      item.classList.toggle('is-open', isOpen);
    };

    /** @type {(panel: HTMLElement) => void} */
    const expandPanel = (panel) => {
      panel.hidden = false;
      panel.style.height = '0px';
      panel.style.opacity = '0';
      // Force reflow so the browser picks up the starting height.
      void panel.offsetHeight;

      const targetHeight = panel.scrollHeight;
      panel.style.transitionDuration = `${DURATION_MS}ms`;
      panel.style.height = `${targetHeight}px`;
      panel.style.opacity = '1';

      /** @type {(event: TransitionEvent) => void} */
      const onEnd = (event) => {
        if (event.target !== panel || event.propertyName !== 'height') return;
        panel.style.height = 'auto';
        panel.removeEventListener('transitionend', onEnd);
      };
      panel.addEventListener('transitionend', onEnd);
    };

    /** @type {(panel: HTMLElement) => void} */
    const collapsePanel = (panel) => {
      const currentHeight = panel.scrollHeight;
      panel.style.transitionDuration = `${DURATION_MS}ms`;
      panel.style.height = `${currentHeight}px`;
      panel.style.opacity = '1';
      void panel.offsetHeight;
      panel.style.height = '0px';
      panel.style.opacity = '0';

      /** @type {(event: TransitionEvent) => void} */
      const onEnd = (event) => {
        if (event.target !== panel || event.propertyName !== 'height') return;
        panel.hidden = true;
        panel.removeEventListener('transitionend', onEnd);
      };
      panel.addEventListener('transitionend', onEnd);
    };

    /** @type {(item: HTMLElement) => void} */
    const closeItem = (item) => {
      const panel = getPanel(item);
      if (!panel || panel.hidden) {
        setExpanded(item, false);
        return;
      }
      setExpanded(item, false);
      collapsePanel(panel);
    };

    /** @type {(item: HTMLElement) => void} */
    const openItem = (item) => {
      const panel = getPanel(item);
      if (!panel) return;
      setExpanded(item, true);
      expandPanel(panel);
    };

    items.forEach((item) => {
      const button = getButton(item);
      const panel = getPanel(item);
      if (!(button instanceof HTMLButtonElement) || !(panel instanceof HTMLElement)) return;

      // Normalize initial state so the first open item has height:auto.
      const isInitiallyOpen = item.classList.contains('is-open');
      setExpanded(item, isInitiallyOpen);
      if (isInitiallyOpen) {
        panel.hidden = false;
        panel.style.height = 'auto';
        panel.style.opacity = '1';
      } else {
        panel.hidden = true;
        panel.style.height = '0px';
        panel.style.opacity = '0';
      }

      button.addEventListener('click', () => {
        const isOpen = item.classList.contains('is-open');

        // Only one open at a time.
        items.forEach((other) => {
          if (other !== item) closeItem(other);
        });

        if (isOpen) {
          closeItem(item);
        } else {
          openItem(item);
        }
      });
    });
  })();
</script>
